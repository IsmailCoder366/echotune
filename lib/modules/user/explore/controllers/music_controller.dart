import 'package:get/get.dart';
import 'package:just_audio/just_audio.dart';
import '../../../../core/models/content_model.dart';

class MusicController extends GetxController {
  final AudioPlayer _audioPlayer = AudioPlayer();

  // Observables
  var isMusicPlayerVisible = false.obs;
  var isPlaying = false.obs;
  var selectedMusic = Rxn<ContentModel>();

  // Mock Data with Network Audio URLs
  final List<ContentModel> musicList = [
    ContentModel(
      title: "Midnight City",
      artist: "by Synth Wave",
      imageUrl: "data:image/jpeg;base64,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",
      videoUrl: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3",
    ),
    ContentModel(
      title: "Lo-Fi Dreams",
      artist: "by Chill Hop",
      imageUrl: "https://media.istockphoto.com/id/505965144/photo/love-music-concept.jpg?s=612x612&w=0&k=20&c=BFnb2dLisCbyeVB9HkpoUBLBF6rAP9XslFwQlWn4bJc=",
      videoUrl: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3",
    ),
    ContentModel(
      title: "Urban Jungle",
      artist: "by Street Beats",
      imageUrl: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTF3sdH4soSiSG79ZhWAQGnLv3rBTPqCfDmUQ&s",
      videoUrl: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3",
    ),
    ContentModel(
      title: "Midnight City",
      artist: "by Synth Wave",
      imageUrl: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTS2VR60T1Hgqczq8BRGYLjyeyRi6R49JF-9Q&s",
      videoUrl: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3",
    ),
    ContentModel(
      title: "Lo-Fi Dreams",
      artist: "by Chill Hop",
      imageUrl: "https://picsum.photos/id/102/200/200",
      videoUrl: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3",
    ),
    ContentModel(
      title: "Urban Jungle",
      artist: "by Street Beats",
      imageUrl: "https://picsum.photos/id/103/200/200",
      videoUrl: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3",
    ),
  ];

  void playNext() {
    if (selectedMusic.value == null) return;

    // Find current index
    int currentIndex = musicList.indexOf(selectedMusic.value!);
    // Move to next (loop back to start if at the end)
    int nextIndex = (currentIndex + 1) % musicList.length;

    playMusic(musicList[nextIndex]);
  }
  void playPrevious() {
    if (selectedMusic.value == null) return;

    int currentIndex = musicList.indexOf(selectedMusic.value!);
    // Move to previous (loop to end if at the start)
    int prevIndex = (currentIndex - 1 + musicList.length) % musicList.length;

    playMusic(musicList[prevIndex]);
  }
  void closeMusicPlayer() {
    isMusicPlayerVisible.value = false;
    _audioPlayer.stop();
    isPlaying.value = false;
  }

  void playMusic(ContentModel music) async {
    selectedMusic.value = music;
    isMusicPlayerVisible.value = true;
    try {
      await _audioPlayer.setUrl(music.videoUrl);
      _audioPlayer.play();
      isPlaying.value = true;
    } catch (e) {
      Get.snackbar("Error", "Could not load audio");
    }
  }

  void togglePlayPause() {
    if (_audioPlayer.playing) {
      _audioPlayer.pause();
      isPlaying.value = false;
    } else {
      _audioPlayer.play();
      isPlaying.value = true;
    }
  }

  @override
  void onClose() {
    _audioPlayer.dispose(); // Cleanup to prevent memory leaks
    super.onClose();
  }
}